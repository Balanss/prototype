import{u as j,r as x,j as s,Q as m,B as o,d as l,g as y,a as i,c as b,b as u,e as N}from"./index-CePkQb68.js";function w(){const{cargoItems:h}=j();x.useState(0),x.useState(!1);const f=async(a,e,r)=>{o.info("order has been updated")},p=async(a,e,r)=>{const d=l(u,"Cargo",a),c=l(u,"warehouse",e),t=await y(c);if(t.exists()){const n=t.data().quantity;await i(c,{quantity:n- -Number(r)},{merge:!0}),await i(d,{[`order.${e}`]:N()}),o.warning("order has been cancelled")}else{console.log("No such document!");return}},g=async(a,e)=>{const r=b(u,"Cargo"),d=l(r,a);i(d,{[`order.${e}.status`]:"ready for transport"},{merge:!0}),o.success("All orders are ready for transport")};return s.jsxs("div",{className:"flex flex-col items-start justify-start ml-10",children:[s.jsx("div",{className:"inline-flex items-center flex-col",children:s.jsx("h1",{className:"text-3xl font-bold text-center mt-4",children:"Track Orders"})}),s.jsxs("div",{className:"flex flex-col gap-4 w-[80vw] rounded flex-wrap m-auto",children:[s.jsx(m,{}),Object.values(h.reduce((a,e)=>{const r=e.order;return Object.keys(r).forEach(c=>{const t=r[c],n=t.id;a[n]||(a[n]=[]),a[n].push(t)}),a},{})).map(a=>s.jsxs("div",{className:`${a[0].status==="accepted"?"hidden":"grid grid-cols-3 bg-slate-900 shadow-card items-start gap-4 p-4 rounded-md hover:shadow-dark-effect "}`,children:[a.map(e=>{var r;return s.jsxs("div",{className:"flex flex-col gap-y-1  ",children:[s.jsx("h2",{children:e.name}),s.jsxs("p",{children:["Status: ",e.status]}),s.jsxs("p",{children:["Quantity: ",e.quantity]}),s.jsxs("p",{children:["Price: ",e.price]}),s.jsxs("p",{children:["Delivery date: ",e.delivery]}),s.jsxs("p",{children:["Driver: ",e.driver]}),s.jsxs("p",{children:["Send on: ",(r=e.sendOn)==null?void 0:r.toDate().toString()]}),s.jsxs("div",{className:"flex flex-row gap-x-4",children:[s.jsx("button",{className:"bg-yellow-600 p-2 rounded",onClick:()=>f(e.id,e.name,e.quantity),children:"Update"}),s.jsx("button",{className:"bg-red-600 p-2 rounded",onClick:()=>p(e.id,e.name,e.quantity),children:"Cancel"})]})]},e.name)}),s.jsx("button",{onClick:()=>a.forEach(e=>g(e.id,e.name)),className:"flex items-start px-4 rounded bg-blue-500",children:"Ready for transport"})]},a[0].id))]})]})}export{w as default};
